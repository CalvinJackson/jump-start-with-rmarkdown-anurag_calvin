---
title: "A Simple Template for Data Lab"
subtitle: "possible subtitle goes here"
author: Wenjie Wang
date: "`r format(Sys.time(), '%d %B %Y')`"
documentclass: article
papersize: letter
fontsize: 11pt
bibliography: template.bib
biblio-style: asa
output:
  bookdown::pdf_document2
  bookdown::html_document2
abstract: |
    This is a good abstract.

---


```{r setup, echo = FALSE, message = FALSE, warning = FALSE}
source("utils_template.R")
## specify the packages needed
pkgs <- c("ggplot2", "splines2")
need.packages(pkgs)

## specify global chunk options
knitr::opts_chunk$set(fig.width = 8, fig.height = 5,
                      out.width = "85%", fig.align = "center")

```


# Introduction {#sec:intro}

This document serves as a template for data lab projects.  In this template, we
review most of the basic syntax of writing a single **R** Markdown file with the
power of **bookdown** [@xie2017bookdown] by examples. The motivation of setting
up a template in **R** Markdown is due to its simple syntax and its flexible
output format. Also, it is in favor of reproducible studies, which play
increasingly important role in modern research.


The rest of this project template is organized as follows.  In Section
\@ref(sec:cross), we briefly discuss about the cross-referencing of **R**
Markdown, which now has a better support from the **bookdown** package than
**rmarkdown** [@allaire2016rmarkdown] package.  In Section \@ref(sec:math), we
present the example of using mathematical environment for theorem, lemma, and
definition, etc.  Some examples of inclusion of figures and tables into the
project report in Section \@ref(sec:figure) and Section \@ref(sec:table).  In
Section \@ref(sec:summary), we provide external resources for further reading.


# Cross-Reference by bookdown {#sec:cross}

Cross-reference of mathematical equations, tables, and figures used to be a pain
of using **Rmarkdown**. Usually extra package, such as **kfigr**
[@koohafkan2015kfigr], and certain kind of extra labor was needed for a
satisfactory cross-referencing.  Fortunately, **bookdown** package provides a
much easier and consistent syntax for cross-referencing.


# Math Equations {#sec:math}

The inline math expressions are quoted by `$`. For instance, $x_i^2$, $\sin(x)$,
$\theta$ are inline expressions. The equations can be simply quoted by `$$` if
no cross-reference is needed, where regular LaTeX commands under math
environment can be used. For equations that need cross-referencing, LaTeX
environments, such as `equation`, `align`, can be used directly. For example,
Eular's identity is given in Equation \@ref(eq:eular).

\begin{align}
  e^{i\theta} = \cos(\theta) + i \sin(\theta).  (\#eq:eular)
\end{align}


# Math Theorem  {#sec:theorem}

The mathematical Theorem can be put inside `theorem` chunk followed by its
label. For instance, the Theorem \@ref(thm:example) is an example Theorem.

```{theorem, example}
This is an example Theorem.
```

Table \@ref(tab:theorem-envs) summarized the available environment for
mathematical theorem, lemma, definition, etc, and their label prefix for
cross-reference.

(ref:theorem-envs) Theorem environments in **bookdown**.

```{r theorem-envs, echo = FALSE}
knitr::kable(data.frame(
  Environment = names(bookdown:::theorem_abbr),
  `Printed Name` = unname(unlist(bookdown:::label_names_math)),
  `Label Prefix` = unname(bookdown:::theorem_abbr),
  stringsAsFactors = FALSE, check.names = FALSE
), caption = '(ref:theorem-envs)', booktabs = TRUE)
```


# Figures {#sec:figure}

Figures can be generated by the code chunk within the source document.

<!-- caption of figure may be defined as follows: -->
(ref:cap-plot1) Cubic M-spline Bases with three internal knots.

```{r plot1, echo = FALSE, fig.cap = "(ref:cap-plot1)"}
x <- seq.int(0, 1, 0.01)
knots <- c(0.3, 0.5, 0.6)
msMat <- mSpline(x, knots = knots, degree = 3, intercept = TRUE)
par(mar = c(2.5, 2.5, 0, 0), mgp = c(1.5, 0.5, 0))
matplot(x, msMat, type = "l", ylab = "M-splines")
abline(v = knots, lty = 2, col = "gray")
```

# Tables {#sec:table}

Similarly, tables can be generated by the code chunk within the source document.


# Code Chunk {#sec:code}

The engine of code chunk should be specified via the option `engine`.

```{r pythonCode, engine = "python"}
foo = "Hello " + "world! "
print(len(foo))
```

# Summary and Discussion {#sec:summary}

In summary, we provide the project template and reviewed the basic syntax of
**bookdown** documents.

The templates and specific samples are available at the GitHub repository
[datalab-tempaltes][repo].


# Acknowledgment {-}

We would like to thank Yihui and all the other authors, contributors for the
fabulous **knitr**, **Rmarkdown**, and **bookdown** packages.


# Reference {-}


[fig:foo]: figs/foo.png
[rmarkdown]: https://CRAN.R-project.org/package=rmarkdown
[kfigr]: https://CRAN.R-project.org/package=kfigr
[bookdown]: https://CRAN.R-project.org/package=bookdown
[repo]: https://github.com/wenjie2wang/datalab-templates
